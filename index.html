<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¨ÙˆØµÙ„Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Tajawal', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #7c92f1 0%, #554af7 100%);
            min-height: 100vh;
        }

        .game-title {
            font-size: 2.5rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .quiz-card, .compass-card {
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            border: none;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            height: 600px;
            overflow-y: auto;
        }

        .question-image {
            width: 75%;
            height: 240px;
            border-radius: 15px;
        }
        .question-image-p {
            width: 20%;
            height: 150px;
            border-radius: 15px;
        }
        .question-text {
            font-size: 1.5rem;
            color: #667eea;
            font-weight: bold;
        }

        .answer-btn {
            background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .answer-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .compass-container {
            width: 280px;
            height: 280px;
            position: relative;
            margin: 0 auto;
        }

        .compass-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(135deg, #FFF 0%, #E3F2FD 100%);
            border: 8px solid #667eea;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .compass-label {
            position: absolute;
            font-weight: bolder;
            font-size: 1.5rem;
        }

        .label-learn {
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            color: #FF6B6B;
        }

        .label-play {
            top: 50%;
            right: -55%;
            transform: translateY(-50%);
            color: #4ECDC4;
        }

        .label-eat {
            bottom: -20%;
            left: 50%;
            transform: translateX(-50%);
            color: #4ECDC4;
        }

        .label-sleep {
            top: 50%;
            left: -55%;
            transform: translateY(-50%);
            color: #95E1D3;
        }

        .compass-arrow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(0deg);
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .arrow-shape {
            width: 0;
            height: 0;
            border-left: 25px solid transparent;
            border-right: 25px solid transparent;
            border-bottom: 100px solid #667eea;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
        }

        .compass-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
        }

        .completion-card {
            background: linear-gradient(135deg, #fceeac 0%, #e9d897 100%);
            border: none;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .completion-emoji {
            font-size: 5rem;
        }

        .restart-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 15px 50px;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .modal-content {
            border: none;
            border-radius: 25px;
        }

        .modal-wrong {
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);
        }

        .current-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-size: 1rem;
            padding: 8px 25px;
            border-radius: 20px;
        }

        @media (max-width: 768px) {
            .compass-container {
                width: 200px;
                height: 200px;
            }
            
            .game-title {
                font-size: 1.5rem;
            }
            
            .question-image {
                width: 120px;
                height: 120px;
            }

            .quiz-card, .compass-card {
                height: auto;
                min-height: 500px;
            }
        }
    </style>
</head>
<body>
    <div class="container-fluid py-4">
        <h1 class="text-center text-white mb-4 game-title">
            ğŸ§­ Ù„Ø¹Ø¨Ø©  Ø¨ÙˆØµÙ„Ø© Ø§Ù„Ø§Ø¹ØªØ²Ø§Ø±! ğŸ§­
        </h1>
        
        <!-- Start Screen -->
        <div id="startScreen" class="row justify-content-center">
            <div class="col-lg-6">
                <div class="card completion-card text-center">
                    <div class="card-body p-5">
                        <div class="completion-emoji mb-3">ğŸ§­</div>
                        <h1 class="fw-bold mb-3" style="font-size: 2.5rem; color: #667eea;">
                            Ù„Ø¹Ø¨Ø©  Ø¨ÙˆØµÙ„Ø© Ø§Ù„Ø§Ø¹ØªØ²Ø§Ø±
                        </h1>
                        <h2 class="fs-4 mb-4 text-dark">
                            ØªØ¹Ù„Ù… Ø§Ù„Ø§Ø¹ØªØ±Ø§Ù ÙˆØ§Ù„Ø§Ø¹ØªØ°Ø§Ø± ÙˆØ§Ù„Ø¥ØµÙ„Ø§Ø­
                        </h2>
                        <button onclick="startGame()" class="btn restart-btn">
                            ğŸ® Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="gameArea" style="display: none;">
            <div class="row g-4">
                <!-- Left Side - Quiz Area -->
                <div class="col-lg-6">
                    <div class="card quiz-card">
                        <div class="card-body p-4">
                            <div class="text-center mb-3">
                                <img src="" alt="Ø³Ø¤Ø§Ù„" class="question-image mb-3" id="questionImage">
                                <p class="fs-5 mt-3 fw-semibold text-dark" id="questionText">
                                    Ù…Ø§Ø°Ø§ Ø­Ø¯Ø« Ù‡Ù†Ø§ØŸ
                                </p>
                            </div>
                            
                            <div class="d-grid gap-3 mt-3" id="answersContainer">
                                <!-- Answers will be inserted here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Side - Compass Area -->
                <div class="col-lg-6">
                    <div class="card compass-card">
                        <div class="card-body p-4 d-flex flex-column align-items-center justify-content-center">
                            <h3 class="fw-bold mb-4" style="color: #667eea; font-size: 1.5rem;">
                                Ø¨ÙˆØµÙ„Ø© Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª
                            </h3>
                            
                            <div class="compass-container">
                                <div class="compass-circle">
                                    <div class="compass-label label-learn"></div>
                                    <div class="compass-label label-play"> Ø§Ù„Ø§Ø¹ØªØ±Ø§Ù ğŸ˜”</div>
                                    <div class="compass-label label-eat">Ø§Ù„Ø§Ø¹ØªØ°Ø§Ø±  ğŸ™„</div>
                                    <div class="compass-label label-sleep">Ø§Ù„Ø¥ØµÙ„Ø§Ø­  ğŸ˜€</div>
                                    
                                    <div class="compass-arrow" id="compassArrow">
                                        <div class="arrow-shape"></div>
                                    </div>
                                    
                                    <div class="compass-center"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Completion Screen -->
        <div id="completionArea" class="justify-content-center align-items-center" style="display: none !important;">
            <div class="col-lg-8">
                <div class="card completion-card text-center">
                    <div class="card-body p-5">
                        <div class="completion-emoji mb-3">ğŸ‰ğŸŠğŸˆ</div>
                        <h1 class="fw-bold mb-3" style="font-size: 2.5rem; color: #667eea;">
                            Ø£Ø­Ø³Ù†Øª!
                        </h1>
                        <h2 class="fs-2 mb-4 text-dark">
                            Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª!
                        </h2>
                        <img src="images/p4.png" class="question-image-p">
                        <div class="mt-4">
                            <button onclick="restartGame()" class="btn restart-btn">
                                ğŸ”„ Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Wrong Answer Modal -->
    <div class="modal fade" id="wrongModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body text-center p-5 modal-wrong">
                    <div style="font-size: 4rem;" class="mb-3">ğŸ˜…</div>
                    <h3 class="text-white fw-bold fs-2 mb-4">Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!</h3>
                    <button type="button" class="btn btn-light btn-lg fw-bold px-5" data-bs-dismiss="modal" style="border-radius: 20px;">
                        Ø­Ø³Ù†Ø§Ù‹
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const questions = [
            {
                direction: "ØªØ¹Ù„Ù…",
                image: "images/p1.png",
                audio: "audio/one.mp3",
                question: "Ù‚Ø§Ù… Ø¹Ù„ÙŠ Ø¨ÙƒØ³Ø± Ù„Ø¹Ø¨Ø© ØµØ¯ÙŠÙ‚Ù‡ Ø£Ø­Ù…Ø¯ Ø¨ØºÙŠØ± Ù‚ØµØ¯ØŒ Ù„Ùˆ ÙƒÙ†Øª Ù…ÙƒØ§Ù† Ø¹Ù„ÙŠ Ù…Ø§Ø°Ø§ Ø³ØªÙØ¹Ù„ ØªØ¹ØªØ±Ù ÙˆØªÙ‚ÙˆÙ„",
                answers: ["Ø£Ù†Ø§ ÙƒØ³Ø±Øª Ø§Ù„Ù„Ø¹Ø¨Ø©", "Ø§Ù„Ù„Ø¹Ø¨Ø© ÙƒØ³Ø±Øª Ù†ÙØ³Ù‡Ø§", "Ù„Ø§ Ø£Ø¹Ø±Ù"],
                correct: 0
            },
            {
                direction: "Ø§Ù„Ø¹Ø¨",
                image: "images/p2.png",
                audio: "audio/two.mp3",
                question: "Ø­Ø²Ù† Ø£Ø­Ù…Ø¯ ØµØ¯ÙŠÙ‚ Ø¹Ù„ÙŠ ÙƒØ«ÙŠØ±Ø§ Ù„Ùˆ ÙƒÙ†Øª Ù…ÙƒØ§Ù† Ø¹Ù„ÙŠ Ù…Ø§Ø°Ø§ ØªÙ‚ÙˆÙ„ Ù„Ù‡ØŸ",
                answers: ["Ø£Ù†Ø§ Ø¢Ø³ÙØŒ Ù„Ù… Ø£ÙƒÙ† Ø£Ù‚ØµØ¯", "Ù‡Ø°Ø§ Ù„ÙŠØ³ Ø®Ø·Ø¦ÙŠ", "Ø£Ù†Øª Ù…Ø¨Ø§Ù„Øº"],
                correct: 0
            },
            {
                direction: "ÙƒÙ„",
                image: "images/p3.png",
                audio: "audio/three.mp3",
                question: "Ù…Ø§Ø°Ø§ ØªÙØ¹Ù„ Ø¨Ø¹Ø¯ Ø£Ù† ØªØ¹ØªØ°Ø±ØŸ",
                answers: ["Ø£ØªØ±ÙƒÙ‡Ø§ ÙƒÙ…Ø§ Ù‡ÙŠ", "Ø£Ø­Ø§ÙˆÙ„ Ø¥ØµÙ„Ø§Ø­Ù‡Ø§", "Ø£Ø®ÙÙŠÙ‡Ø§"],
                correct: 1
            },
        ];

        const directions = ["", "Ø§Ù„Ø§Ø¹ØªØ±Ø§Ù", "Ø§Ù„Ø§Ø¹ØªØ°Ø§Ø±", "Ø§Ù„Ø¥ØµÙ„Ø§Ø­"];
        const rotations = [0, 90, 180, 270];
        let currentQuestion = 0;
        let wrongModal;
        let currentAudio = null;
        let effectAudio = null;

        function init() {
            wrongModal = new bootstrap.Modal(document.getElementById('wrongModal'));
        }

        function stopAllAudio() {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
                currentAudio = null;
            }
            if (effectAudio) {
                effectAudio.pause();
                effectAudio.currentTime = 0;
                effectAudio = null;
            }
        }

        function playEffectAudio(audioUrl, callback) {
            stopAllAudio();
            
            effectAudio = new Audio(audioUrl);
            effectAudio.play().catch(e => console.log('Audio play failed:', e));
            
            if (callback) {
                effectAudio.addEventListener('ended', callback);
            }
        }

        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameArea').style.display = 'block';
            displayQuestion();
        }

        function playQuestionAudio(audioUrl) {
            stopAllAudio();
            
            currentAudio = new Audio(audioUrl);
            currentAudio.play().catch(e => console.log('Audio play failed:', e));
        }

        function displayQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('questionImage').src = q.image;
            document.getElementById('questionText').textContent = q.question;
            
            playQuestionAudio(q.audio);
            
            const answersContainer = document.getElementById('answersContainer');
            answersContainer.innerHTML = '';
            
            q.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'btn answer-btn';
                button.textContent = answer;
                button.onclick = () => handleAnswer(index);
                answersContainer.appendChild(button);
            });
        }

        function handleAnswer(index) {
            if (index === questions[currentQuestion].correct) {
                // âœ… Play "correct" sound first
                playEffectAudio('audio/true.mp3', () => {
                    if (currentQuestion < questions.length - 1) {
                        const arrow = document.getElementById('compassArrow');
                        arrow.style.transform = `translate(-50%, -50%) rotate(${rotations[currentQuestion + 1]}deg)`;
                        
                        setTimeout(() => {
                            currentQuestion++;
                            displayQuestion();
                        }, 600);
                    } else {
                        const arrow = document.getElementById('compassArrow');
                        arrow.style.transform = `translate(-50%, -50%) rotate(360deg)`;
                        
                        setTimeout(() => {
                            completeGame();
                        }, 600);
                    }
                });

            } else {
                // âŒ Wrong answer logic
                wrongModal.show();
                playEffectAudio('audio/try.mp3');
            }
        }

        function completeGame() {
            stopAllAudio();
            
            document.getElementById('gameArea').style.display = 'none';
            document.getElementById('completionArea').style.display = 'flex';
            playClap();
            createConfetti();
        }

        function playClap() {
            effectAudio = new Audio('audio/clap.mp3');
            effectAudio.play().catch(e => console.log('Audio play failed:', e));
        }

        function createConfetti() {
            const colors = ['#FF6B6B', '#4ECDC4', '#FFE66D', '#95E1D3', '#F38181'];
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 2 + 's';
                confetti.style.animationDuration = (2 + Math.random() * 2) + 's';
                confetti.style.animation = 'fall linear forwards';
                document.body.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 5000);
            }
        }

        function restartGame() {
            stopAllAudio();
            
            currentQuestion = 0;
            document.getElementById('completionArea').style.display = 'none';
            document.getElementById('startScreen').style.display = 'flex';
            document.getElementById('compassArrow').style.transform = 'translate(-50%, -50%) rotate(0deg)';
        }

        window.onload = init;
    </script>
</body>
</html>
